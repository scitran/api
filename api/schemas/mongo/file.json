{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "oneOf": [
      { "$ref": "file.json#/definitions/MR" },
      { "$ref": "file.json#/definitions/physio" },
      { "$ref": "file.json#/definitions/CT" }
  ],
  "properties": {
    "name":           { "type": "string" },
    "created":        {},
    "modified":       {},
    "type":           { "enum": ["dicom", "nifti", null] },
    "mimetype":       { "type": "string" },
    "size":           { "type": "integer" },
    "hash":           { "type": "string" },
    "instrument":       {},
    "measurements":   {},
    "tags": {
      "items": { "type": "string"},
      "type": "array",
      "uniqueItems": true
    },
    "metadata": {
      "type": "object"
    }
  },
  "required": ["name", "created", "modified", "size", "hash"],
  "key_fields": ["name"],
  "additionalProperties": false,
  "definitions": {
      "MR": {
          "type": "object",
          "properties": {
              "instrument": { "enum": ["MR"] },
              "measurements": {
                  "type": "array",
                  "items": {
                      "enum": ["mr_measurement1",
                               "mr_measurement2",
                               "mr_measurement3"]
                  },
                "uniqueItems": true
              }
          }
      },
      "physio": {
          "type": "object",
          "properties": {
              "instrument": { "enum": ["Physio"] },
              "measurements": {
                "items": {
                  "enum": ["physio_measurement1",
                           "physio_measurement2",
                           "physio_measurement3"]
                },
                "type": "array",
                "uniqueItems": true
              }
          }
      },
      "CT": {
          "type": "object",
          "properties": {
              "instrument": { "enum": ["CT"] },
              "measurements": {
                "items": {
                  "enum": ["ct_measurement1",
                           "ct_measurement2",
                           "ct_measurement3"]
                },
                "type": "array",
                "uniqueItems": true
              }
          }
      }
  }
}
